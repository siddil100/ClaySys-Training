@model IEnumerable<MovieTicketBooking.Models.ShowTime>

@{
    ViewBag.Title = "View all showtimes";
    Layout = "~/Views/Shared/AdminLayout.cshtml";
}
<link href="~/Content/customcss/viewShowtimesAdmin.css" rel="stylesheet" />
<h2>All Showtimes</h2>

@if (Model.Any())
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Movie name</th>
                <th>Show date</th>
                <th>Start time</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var showtime in Model)
            {
                <tr>
                    <td>@showtime.MovieName</td>
                    <td>@showtime.ShowDate.ToString("yyyy-MM-dd")</td>
                    <td>@(DateTime.Today.Add(showtime.StartTime).ToString("hh:mm tt"))</td>
                    <td>
                        <div class="action-buttons">
                            @Html.ActionLink("Edit", "EditShowtime", new { id = showtime.ShowtimeId }, new { @class = "btn btn-primary" })
                            @Html.ActionLink("View Bookings", "ViewBookings", new { showtimeId = showtime.ShowtimeId }, new { @class = "btn btn-primary" })

                            @using (Html.BeginForm("DeleteShowtime", "Admin", FormMethod.Post))
                            {
                                @Html.AntiForgeryToken()
                                @Html.Hidden("id", showtime.ShowtimeId)
                                <input type="submit" value="Delete" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this showtime?');" />
                            }
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p>No showtimes available.</p>
}
